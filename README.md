# Rensou Gamers Project - Hybrid AI System

## プロジェクト情報
* **System Core:** Ver 1.0 (基礎完成版 / F9停止機能付)
* **OBS Script:** Ver 1.6 (設定強制固定版)
* **App System:** Ver 1.0 (ハイブリッド対応版)
* **最終更新日:** 2025年11月26日

## プロジェクト概要
本システムは、生配信用の「AIホストシステム」と、リスナー参加用の「トレーニングアプリ」を統合したハイブリッド環境です。
配信とアプリで共通のJSONデータを使用することで、完全に連動したゲーム体験と学習環境を提供します。

---

## 1. 共通データ（システムの核）
| ファイル名 | 役割 | 解説 |
| :--- | :--- | :--- |
| **microwave_data.json** | 知識データ (脳) | 配信システム(main.py)とアプリ(app.py)が参照する共通ファイル。<br>質問キーワード、回答音声のパス、正解アイテム情報を管理します。 |

## 2. 配信システム (Host System)
**対象環境:** PC / OBS Studio

| ファイル名 | 役割 | 解説 |
| :--- | :--- | :--- |
| **main.py** | 制御プログラム | マイク入力を監視し、JSONルールに基づいてOBSへ指示を出します。<br>F9キーによる一時停止/再開機能を搭載しています。 |
| **auto_wav_player.lua** | OBS制御スクリプト<br>(Ver 1.6) | OBSに読み込ませて使用します。<br>Pythonからの指示を受け取り、メディアソースの再生制御を行います。<br>設定を強制的に固定し、音声が途切れる問題を防ぐ仕様です。 |
| **audio/** | 音声素材 | AIの回答用WAVファイルが格納されています。 |

## 3. アプリシステム (Training App)
**対象環境:** スマートフォン / Webブラウザ

| ファイル名 | 役割 | 解説 |
| :--- | :--- | :--- |
| **app.py** | Webアプリ本体 | Streamlitを使用したトレーニングアプリです。<br>パスワード認証、音声/テキスト入力、回答ログの自動記録機能を備えています。 |
| **questions_template.json** | 質問テンプレート | アプリの「黄金の8ステップ」で使用する選択肢データです。 |
| **requirements.txt** | 依存ライブラリ | クラウド環境へデプロイする際に必要な設定ファイルです。 |

## 4. 一時ファイル (Runtime Files)
※ `main.py` 実行時に自動生成・更新されます。

| ファイル名 | 役割 | 解説 |
| :--- | :--- | :--- |
| **current_question.txt** | 入力 (耳) | LocalVocal(Whisper)が認識したテキストが書き込まれます。 |
| **next_wav_path.txt** | 出力 (口) | Pythonが決定した「次に再生するWAVファイルのパス」が書き込まれます。 |
| **thinking_state.txt** | 状態 (表情) | 現在のAIの状態を数値で管理します。<br>0: 待機中 / 1: 考え中 / 2: 一時停止(F9) |

---

## 起動・操作方法

### 【配信システムの起動】
1. OBSを起動し、スクリプトに `auto_wav_player.lua` を設定する。
2. Python環境で `main.py` を実行する。
3. コンソールに「準備完了」と出たら、**F9キー** を押して監視を開始する。

### 【アプリの起動】
ローカルでテストする場合、ターミナルで以下のコマンドを実行します。

```bash
streamlit run app.py